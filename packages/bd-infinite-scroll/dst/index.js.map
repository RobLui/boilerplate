{"version":3,"file":"index.js","sources":["../.tmp/buildOutput/packages/bd-infinite-scroll/.tmp/srcInlined/services/viewport.service.js","../.tmp/buildOutput/packages/bd-infinite-scroll/.tmp/srcInlined/directives/infinite-scroll.directive.js","../.tmp/buildOutput/packages/bd-infinite-scroll/.tmp/srcInlined/infinite-scroll.module.js","../.tmp/buildOutput/packages/bd-infinite-scroll/.tmp/srcInlined/index.js"],"sourcesContent":["import { Injectable } from '@angular/core';\nvar BdViewportService = /** @class */ (function () {\n    function BdViewportService() {\n    }\n    /**\n     * Gets the distance from the element's bottom (including its padding but not its margin or border) to its bottommost visible content.\n     * In simple English: the height of the content that overflows at the bottom edge, in pixels.\n     *\n     * @param viewport the scroll container.\n     */\n    /**\n         * Gets the distance from the element's bottom (including its padding but not its margin or border) to its bottommost visible content.\n         * In simple English: the height of the content that overflows at the bottom edge, in pixels.\n         *\n         * @param viewport the scroll container.\n         */\n    BdViewportService.prototype.getScrollBottom = /**\n         * Gets the distance from the element's bottom (including its padding but not its margin or border) to its bottommost visible content.\n         * In simple English: the height of the content that overflows at the bottom edge, in pixels.\n         *\n         * @param viewport the scroll container.\n         */\n    function (viewport) {\n        // PERF: this method is a hot spot (called many times) so don't do expensive stuff here.\n        return viewport.scrollHeight - (viewport.scrollTop + viewport.clientHeight);\n    };\n    BdViewportService.decorators = [\n        { type: Injectable },\n    ];\n    /** @nocollapse */\n    BdViewportService.ctorParameters = function () { return []; };\n    return BdViewportService;\n}());\nexport { BdViewportService };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld3BvcnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvc2VydmljZXMvdmlld3BvcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7O0lBSXZDOzs7OztPQUtHOzs7Ozs7O0lBQ0gsMkNBQWU7Ozs7OztJQUFmLFVBQWdCLFFBQXFCOztRQUVqQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0tBQy9FOztnQkFYSixVQUFVOzs7OzRCQUZYOztTQUdhLGlCQUFpQiJ9","import { Directive, Input, Output, EventEmitter, ElementRef, HostListener, ChangeDetectorRef } from '@angular/core';\nimport { BdViewportService } from '../services/viewport.service';\nvar DIRECTIVE = 'bdInfiniteScroll';\nvar BdInfiniteScrollDirective = /** @class */ (function () {\n    function BdInfiniteScrollDirective(er, cdr, viewportService) {\n        this.er = er;\n        this.cdr = cdr;\n        this.viewportService = viewportService;\n        this.threshold = 1;\n        this.watching = false;\n        this.watchingChange = new EventEmitter();\n        this.lazyLoad = new EventEmitter(true);\n    }\n    BdInfiniteScrollDirective.prototype.ngOnChanges = function (changes) {\n        var _this = this;\n        if (changes.watching && changes.watching.currentValue === true) {\n            // Check if there is enough overflow whenever the directive transitions from being disabled to being enabled (in between lazy loads).\n            // Otherwise no loading occurs until after a scroll event, potentially resulting in bad UX when there is little or no overflow.\n            // Wrap in setTimeout to delay this check until Angular has finished processing change detection for all components.\n            // Otherwise there is a good chance that Angular has not yet updated the DOM since the last load event.\n            // This is always the case when bdInfiniteScroll is placed on a scroll container with <ng-content>.\n            setTimeout(function () { return _this.doCheck(); });\n        }\n    };\n    BdInfiniteScrollDirective.prototype.onScroll = function () {\n        if (this.watching) {\n            this.doCheck();\n        }\n    };\n    BdInfiniteScrollDirective.prototype.doCheck = function () {\n        if (this.viewportService.getScrollBottom(this.er.nativeElement) <= this.threshold) {\n            this.watchingChange.emit(this.watching = false);\n            this.lazyLoad.emit();\n        }\n    };\n    BdInfiniteScrollDirective.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[\" + DIRECTIVE + \"]\",\n                    exportAs: DIRECTIVE\n                },] },\n    ];\n    /** @nocollapse */\n    BdInfiniteScrollDirective.ctorParameters = function () { return [\n        { type: ElementRef, },\n        { type: ChangeDetectorRef, },\n        { type: BdViewportService, },\n    ]; };\n    BdInfiniteScrollDirective.propDecorators = {\n        \"threshold\": [{ type: Input },],\n        \"watching\": [{ type: Input, args: [DIRECTIVE,] },],\n        \"watchingChange\": [{ type: Output, args: [DIRECTIVE + \"Change\",] },],\n        \"lazyLoad\": [{ type: Output },],\n        \"onScroll\": [{ type: HostListener, args: ['scroll',] },],\n    };\n    return BdInfiniteScrollDirective;\n}());\nexport { BdInfiniteScrollDirective };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5maW5pdGUtc2Nyb2xsLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZGlyZWN0aXZlcy9pbmZpbml0ZS1zY3JvbGwuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBNEIsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDOUksT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFakUsSUFBTSxTQUFTLEdBQVcsa0JBQWtCLENBQUM7O0lBZXpDLG1DQUNZLEVBQWMsRUFDZCxHQUFzQixFQUN0QixlQUFrQztRQUZsQyxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQ2QsUUFBRyxHQUFILEdBQUcsQ0FBbUI7UUFDdEIsb0JBQWUsR0FBZixlQUFlLENBQW1CO3lCQVhqQixDQUFDO3dCQUVRLEtBQUs7OEJBRTJCLElBQUksWUFBWSxFQUFFO3dCQUUvQyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUM7S0FPOUQ7SUFFRCwrQ0FBVyxHQUFYLFVBQVksT0FBc0I7UUFBbEMsaUJBU0M7UUFSRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsWUFBWSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Ozs7OztZQU03RCxVQUFVLENBQUMsY0FBTSxPQUFBLEtBQUksQ0FBQyxPQUFPLEVBQUUsRUFBZCxDQUFjLENBQUMsQ0FBQztTQUNwQztLQUNKO0lBR0QsNENBQVE7UUFDSixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNoQixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDbEI7O0lBR0csMkNBQU8sR0FBZjtRQUNJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDaEYsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsQ0FBQztZQUNoRCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ3hCO0tBQ0o7O2dCQTNDSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLE1BQUksU0FBUyxNQUFHO29CQUMxQixRQUFRLEVBQUUsU0FBUztpQkFDdEI7Ozs7Z0JBUmdELFVBQVU7Z0JBQTBDLGlCQUFpQjtnQkFDN0csaUJBQWlCOzs7OEJBU3JCLEtBQUs7NkJBRUwsS0FBSyxTQUFDLFNBQVM7bUNBRWYsTUFBTSxTQUFJLFNBQVMsV0FBUTs2QkFFM0IsTUFBTTs2QkFvQk4sWUFBWSxTQUFDLFFBQVE7O29DQXBDMUI7O1NBU2EseUJBQXlCIn0=","import { NgModule } from '@angular/core';\nimport { BdViewportService } from './services/viewport.service';\nimport { CommonModule } from '@angular/common';\nimport { BdInfiniteScrollDirective } from './directives/infinite-scroll.directive';\nvar BdInfiniteScrollModule = /** @class */ (function () {\n    function BdInfiniteScrollModule() {\n    }\n    BdInfiniteScrollModule.decorators = [\n        { type: NgModule, args: [{\n                    imports: [CommonModule],\n                    declarations: [\n                        BdInfiniteScrollDirective\n                    ],\n                    providers: [\n                        BdViewportService\n                    ],\n                    exports: [\n                        BdInfiniteScrollDirective\n                    ]\n                },] },\n    ];\n    /** @nocollapse */\n    BdInfiniteScrollModule.ctorParameters = function () { return []; };\n    return BdInfiniteScrollModule;\n}());\nexport { BdInfiniteScrollModule };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5maW5pdGUtc2Nyb2xsLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvaW5maW5pdGUtc2Nyb2xsLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQzs7Ozs7Z0JBRWxGLFFBQVEsU0FBQztvQkFDTixPQUFPLEVBQUUsQ0FBQyxZQUFZLENBQUM7b0JBQ3ZCLFlBQVksRUFBRTt3QkFDVix5QkFBeUI7cUJBQzVCO29CQUNELFNBQVMsRUFBRTt3QkFDUCxpQkFBaUI7cUJBQ3BCO29CQUNELE9BQU8sRUFBRTt3QkFDTCx5QkFBeUI7cUJBQzVCO2lCQUNKOzs7O2lDQWhCRDs7U0FpQmEsc0JBQXNCIn0=","/**\n * Generated bundle index. Do not edit.\n */\nexport * from './infinite-scroll';\nexport { BdInfiniteScrollDirective as ɵa } from './directives/infinite-scroll.directive';\nexport { BdViewportService as ɵb } from './services/viewport.service';\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUlBLGNBQWMsbUJBQW1CLENBQUM7QUFFbEMsT0FBTyxFQUFDLHlCQUF5QixJQUFJLEVBQUUsRUFBQyxNQUFNLHdDQUF3QyxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyxpQkFBaUIsSUFBSSxFQUFFLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQyJ9"],"names":[],"mappings":"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"}