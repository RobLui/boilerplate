{"version":3,"file":"index.js","sources":["../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/chartSelectionType.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/bulletPositionStrategy.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/lineChartDefaultValues.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/lineChartClasses.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderers/animatedLineRenderer.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderers/bulletRenderer.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderers/draggerRenderer.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderers/gradientRenderer.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/line-chart-positioning-data.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/lineChartSelectionManager.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderers/lineRenderer.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/lineChartRenderComposition.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/renderConfig/lineChartRenderConfig.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/d3LineChart.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/d3LineChart/helpers/draggerPositionStrategy.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/line-chart.component.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/line-chart.module.js","../.tmp/buildOutput/packages/bd-line-chart/.tmp/srcInlined/index.js"],"sourcesContent":["/**\n * the way points can be selected on the chart\n */\n/**\n * the way points can be selected on the chart\n */\nexport var BdChartSelectionType;\n/**\n * the way points can be selected on the chart\n */\n(function (BdChartSelectionType) {\n    BdChartSelectionType[\"None\"] = \"none\";\n    BdChartSelectionType[\"Bullet\"] = \"bullet\";\n    BdChartSelectionType[\"Dragger\"] = \"dragger\";\n})(BdChartSelectionType || (BdChartSelectionType = {}));\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhcnRTZWxlY3Rpb25UeXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjSW5saW5lZC9kM0xpbmVDaGFydC9oZWxwZXJzL2NoYXJ0U2VsZWN0aW9uVHlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRzs7OztBQUNILE1BQU0sQ0FBTixJQUFZLG9CQUlYOzs7O0FBSkQsV0FBWSxvQkFBb0I7SUFDNUIscUNBQWEsQ0FBQTtJQUNiLHlDQUFpQixDQUFBO0lBQ2pCLDJDQUFtQixDQUFBO0dBSFgsb0JBQW9CLEtBQXBCLG9CQUFvQixRQUkvQiJ9","import { BdTemplateSharedClasses, BdTemplateStyles } from '@delen/bd-chart-core';\nvar BdBulletPositionStrategy = /** @class */ (function () {\n    function BdBulletPositionStrategy() {\n    }\n    BdBulletPositionStrategy.prototype.calculatePosition = function (templateWrapperElement, positioningData) {\n        var wrapperHeight = templateWrapperElement.getBoundingClientRect().height;\n        var wrapperWidth = templateWrapperElement.getBoundingClientRect().width;\n        var arrowHeight = 18;\n        var bdTemplateStyle = new BdTemplateStyles();\n        var hasHalfWidthSpace = ((positioningData.position.x + (wrapperWidth * 0.5) + arrowHeight) < positioningData.boundingRect.width) && ((positioningData.position.x - (wrapperWidth * 0.5) - arrowHeight) > 0);\n        /* Add the classes that need to be set default */\n        bdTemplateStyle.classes += BdTemplateSharedClasses.calloutClass + \" \" + BdTemplateSharedClasses.calloutFadeInClass;\n        /* Does the callout fit inside the grid?\n                if so it will be displayed as top or bottom with the tip in the center\n                if not it will be left or right with the tip at the side */\n        if (positioningData.position.y - (wrapperHeight + arrowHeight) > 0 && hasHalfWidthSpace) {\n            // the callout does not come out of the top of the chart so we can display above the point\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowTopClass + \" \";\n            bdTemplateStyle.templateStyle.top = positioningData.position.y - (wrapperHeight + arrowHeight) + \"px\";\n            bdTemplateStyle.templateStyle.left = positioningData.position.x - (wrapperWidth * 0.5) + \"px\";\n        }\n        else if (positioningData.position.y < positioningData.boundingRect.height * 0.5 && hasHalfWidthSpace) {\n            // the callout sticks out on top and needs top displayed at  below the point\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowBottomClass + \" \";\n            bdTemplateStyle.templateStyle.top = positioningData.position.y + arrowHeight + \"px\";\n            bdTemplateStyle.templateStyle.left = positioningData.position.x - (wrapperWidth * 0.5) + \"px\";\n        }\n        else if (positioningData.position.x > positioningData.boundingRect.width * 0.5) {\n            // the callout would stick out (see hasHalfWidthSpace) to the right of the chart (see if condition)\n            // we position the tip of the callout to the left\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowLeftClass + \" \";\n            bdTemplateStyle.templateStyle.top = positioningData.position.y - (wrapperHeight * 0.5) + \"px\";\n            bdTemplateStyle.templateStyle.left = positioningData.position.x - wrapperWidth - arrowHeight + \"px\";\n        }\n        else {\n            // the callout would stick out (see hasHalfWidthSpace) to the left of the chart\n            // we position the tip of the callout to the right\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowRightClass + \" \";\n            bdTemplateStyle.templateStyle.top = positioningData.position.y - (wrapperHeight * 0.5) + \"px\";\n            bdTemplateStyle.templateStyle.left = positioningData.position.x + arrowHeight + \"px\";\n        }\n        return bdTemplateStyle;\n    };\n    return BdBulletPositionStrategy;\n}());\nexport { BdBulletPositionStrategy };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVsbGV0UG9zaXRpb25TdHJhdGVneS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZDNMaW5lQ2hhcnQvaGVscGVycy9idWxsZXRQb3NpdGlvblN0cmF0ZWd5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBc0IsdUJBQXVCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUdyRyxJQUFBOzs7SUFFSSxvREFBaUIsR0FBakIsVUFBa0Isc0JBQStCLEVBQUUsZUFBeUM7UUFDeEYsSUFBTSxhQUFhLEdBQVcsc0JBQXNCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDcEYsSUFBTSxZQUFZLEdBQVcsc0JBQXNCLENBQUMscUJBQXFCLEVBQUUsQ0FBQyxLQUFLLENBQUM7UUFDbEYsSUFBTSxXQUFXLEdBQVcsRUFBRSxDQUFDO1FBRS9CLElBQUksZUFBZSxHQUFxQixJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDL0QsSUFBSSxpQkFBaUIsR0FBWSxDQUFDLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFDLEdBQUcsV0FBVyxDQUFDLEdBQUcsZUFBZSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFDLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7O1FBR3JOLGVBQWUsQ0FBQyxPQUFPLElBQU8sdUJBQXVCLENBQUMsWUFBWSxTQUFJLHVCQUF1QixDQUFDLGtCQUFvQixDQUFDOzs7O1FBS25ILEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFJLENBQUMsYUFBYSxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7O1lBRXZGLGVBQWUsQ0FBQyxZQUFZLElBQU8sdUJBQXVCLENBQUMsYUFBYSxNQUFHLENBQUM7WUFDNUUsZUFBZSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEdBQU0sZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDLE9BQUksQ0FBQztZQUN0RyxlQUFlLENBQUMsYUFBYSxDQUFDLElBQUksR0FBTSxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsT0FBSSxDQUFDO1NBQ2pHO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLGVBQWUsQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLEdBQUcsSUFBSyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7O1lBRXRHLGVBQWUsQ0FBQyxZQUFZLElBQU8sdUJBQXVCLENBQUMsZ0JBQWdCLE1BQUcsQ0FBQztZQUMvRSxlQUFlLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBTSxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxXQUFXLE9BQUksQ0FBQztZQUNwRixlQUFlLENBQUMsYUFBYSxDQUFDLElBQUksR0FBTSxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsT0FBSSxDQUFDO1NBQ2pHO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLGVBQWUsQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7OztZQUcvRSxlQUFlLENBQUMsWUFBWSxJQUFPLHVCQUF1QixDQUFDLGNBQWMsTUFBRyxDQUFDO1lBQzdFLGVBQWUsQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFNLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQyxPQUFJLENBQUM7WUFDOUYsZUFBZSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEdBQU0sZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsWUFBWSxHQUFHLFdBQVcsT0FBSSxDQUFDO1NBQ3ZHO1FBQUMsSUFBSSxDQUFDLENBQUM7OztZQUdKLGVBQWUsQ0FBQyxZQUFZLElBQU8sdUJBQXVCLENBQUMsZUFBZSxNQUFHLENBQUM7WUFDOUUsZUFBZSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEdBQU0sZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDLE9BQUksQ0FBQztZQUM5RixlQUFlLENBQUMsYUFBYSxDQUFDLElBQUksR0FBTSxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxXQUFXLE9BQUssQ0FBQztTQUN6RjtRQUVELE1BQU0sQ0FBQyxlQUFlLENBQUM7S0FDMUI7bUNBNUNMO0lBOENDLENBQUE7QUEzQ0Qsb0NBMkNDIn0=","import { BdMargins, BdSize } from '@delen/bd-chart-core';\nvar BdLineChartDefaultValues = /** @class */ (function () {\n    function BdLineChartDefaultValues() {\n        this.margins = {\n            defaultMargins: new BdMargins(25, 0, 35, 2),\n            draggerSelectionMargins: new BdMargins(65, 20, 35, 20)\n        };\n        this.defaultSize = new BdSize(240, 700);\n        this.dragger = {\n            draggerElmWidth: 38,\n            draggerElmHeight: 19\n        };\n        this.transitionDurationFast = 250;\n        this.bullet = {\n            bulletSize: 3.5,\n            fadeDuration: 150,\n            animationDuration: 750\n        };\n        this.animation = {\n            transitionDuration: 750,\n            transitionDurationFast: 250\n        };\n    }\n    return BdLineChartDefaultValues;\n}());\nexport { BdLineChartDefaultValues };\nexport var bdLineChartDefaultValues = new BdLineChartDefaultValues();\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZUNoYXJ0RGVmYXVsdFZhbHVlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZDNMaW5lQ2hhcnQvbGluZUNoYXJ0RGVmYXVsdFZhbHVlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXpELElBQUE7O3VCQUNtQjtZQUNYLGNBQWMsRUFBRSxJQUFJLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDM0MsdUJBQXVCLEVBQUUsSUFBSSxTQUFTLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ3pEOzJCQUNxQixJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO3VCQUMzQjtZQUNYLGVBQWUsRUFBRSxFQUFFO1lBQ25CLGdCQUFnQixFQUFFLEVBQUU7U0FDdkI7c0NBQ2dDLEdBQUc7c0JBQ3RCO1lBQ1YsVUFBVSxFQUFFLEdBQUc7WUFDZixZQUFZLEVBQUUsR0FBRztZQUNqQixpQkFBaUIsRUFBRSxHQUFHO1NBQ3pCO3lCQUNnQjtZQUNiLGtCQUFrQixFQUFFLEdBQUc7WUFDdkIsc0JBQXNCLEVBQUUsR0FBRztTQUM5Qjs7bUNBckJMO0lBc0JDLENBQUE7QUFwQkQsb0NBb0JDO0FBRUQsTUFBTSxDQUFDLElBQUksd0JBQXdCLEdBQTZCLElBQUksd0JBQXdCLEVBQUUsQ0FBQyJ9","/**\n * these is just a helper class to define and build\n * css classes in one place\n */\nvar BdLineChartClasses = /** @class */ (function () {\n    function BdLineChartClasses() {\n    }\n    BdLineChartClasses.getGradientClass = function (graphId) {\n        return \"ng2-c-chart__gradient-\" + graphId;\n    };\n    BdLineChartClasses.bulletClass = 'ng2-c-chart__bullet';\n    BdLineChartClasses.draggerSelectionOverlayClass = 'ng2-c-chart__selection--overlay';\n    BdLineChartClasses.draggerClass = 'ng2-c-chart__dragger';\n    BdLineChartClasses.draggerArrowClass = 'ng2-c-chart__dragger--arrow';\n    BdLineChartClasses.draggerLineClass = 'ng2-c-chart__dragger--line';\n    BdLineChartClasses.gradientStartClass = 'ng2-c-chart__gradient--start';\n    BdLineChartClasses.gradientStopClass = 'ng2-c-chart__gradient--stop';\n    BdLineChartClasses.areaClass = 'area';\n    BdLineChartClasses.lineClass = 'line';\n    return BdLineChartClasses;\n}());\nexport { BdLineChartClasses };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZUNoYXJ0Q2xhc3Nlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZDNMaW5lQ2hhcnQvaGVscGVycy9saW5lQ2hhcnRDbGFzc2VzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7SUFlVyxtQ0FBZ0IsR0FBdkIsVUFBd0IsT0FBZTtRQUNuQyxNQUFNLENBQUMsMkJBQXlCLE9BQVMsQ0FBQztLQUM3QztxQ0FacUMscUJBQXFCO3NEQUNKLGlDQUFpQztzQ0FDakQsc0JBQXNCOzJDQUNqQiw2QkFBNkI7MENBQzlCLDRCQUE0Qjs0Q0FDMUIsOEJBQThCOzJDQUMvQiw2QkFBNkI7bUNBQ3JDLE1BQU07bUNBQ04sTUFBTTs2QkFiOUM7O1NBSWEsa0JBQWtCIn0=","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { line } from 'd3-shape';\nimport { BdAxisClasses, BdRenderer } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nimport { BdLineChartClasses } from '../helpers/lineChartClasses';\nvar BdAnimatedLineRenderer = /** @class */ (function (_super) {\n    __extends(BdAnimatedLineRenderer, _super);\n    function BdAnimatedLineRenderer(renderQueue, svgSelection, renderConfig, lineData) {\n        var _this = _super.call(this, renderQueue) || this;\n        _this.svgSelection = svgSelection;\n        _this.renderConfig = renderConfig;\n        _this.lineData = lineData;\n        return _this;\n    }\n    BdAnimatedLineRenderer.prototype.render = function () {\n        var _this = this;\n        // get the scale function for each axis\n        var xScale = this.renderConfig.xRenderConfig.scale;\n        var yScale = this.renderConfig.yRenderConfig.scale;\n        // make a line function that will return the svg coordinates for each datapoint using the scales to transform between datapoint and svg coordinate space\n        var resultLine = line() // tslint:disable-line\n            .x(function (d) { return xScale(d.x); })\n            .y(function (d) { return yScale(d.y); });\n        // make another line function, only this one has y coordinate set to to lowest possible value of y-axis in the svg coordinate space\n        // this will create function for creating a flat line on the y axis with points with x values that are the same as resultLine)\n        var flatLine = line()\n            .x(function (d) { return xScale(d.x); })\n            .y(function (d) { return yScale(_this.renderConfig.yRenderConfig.min); });\n        // append a path, points will be plotted using the animated line creating a flat path on the xAxis\n        this.svgSelection.append('path')\n            .attr('class', BdLineChartClasses.lineClass)\n            .attr('clip-path', \"url(#\" + BdAxisClasses.getClipPathClass(this.renderConfig.id) + \")\")\n            .attr('d', flatLine(this.lineData));\n        // animate the the values of the flat line\n        this.svgSelection\n            .selectAll('path.line')\n            .transition()\n            .duration(bdLineChartDefaultValues.animation.transitionDuration) // make a transition from the flat line to resultLine\n            .attr('d', resultLine(this.lineData)) // the final values should be the ones of the result line\n            .on('end', function () { return _this.finishRender(); });\n    };\n    return BdAnimatedLineRenderer;\n}(BdRenderer));\nexport { BdAnimatedLineRenderer };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5pbWF0ZWRMaW5lUmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2QzTGluZUNoYXJ0L3JlbmRlcmVycy9hbmltYXRlZExpbmVSZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUVoQyxPQUFPLEVBQ0gsYUFBYSxFQUViLFVBQVUsRUFFYixNQUFNLHNCQUFzQixDQUFDO0FBRTlCLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBR2pFLElBQUE7SUFBNEMsMENBQVU7SUFDbEQsZ0NBQ0ksV0FBMEIsRUFDbEIsWUFBaUIsRUFDakIsWUFBcUMsRUFDckMsUUFBdUI7UUFKbkMsWUFNSSxrQkFBTSxXQUFXLENBQUMsU0FDckI7UUFMVyxrQkFBWSxHQUFaLFlBQVksQ0FBSztRQUNqQixrQkFBWSxHQUFaLFlBQVksQ0FBeUI7UUFDckMsY0FBUSxHQUFSLFFBQVEsQ0FBZTs7S0FHbEM7SUFFRCx1Q0FBTSxHQUFOO1FBQUEsaUJBeUJDOztRQXZCRyxJQUFJLE1BQU0sR0FBYSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFDN0QsSUFBSSxNQUFNLEdBQWEsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDOztRQUU3RCxJQUFJLFVBQVUsR0FBUSxJQUFJLEVBQUU7YUFDdkIsQ0FBQyxDQUFDLFVBQUMsQ0FBTSxJQUFLLE9BQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBWCxDQUFXLENBQUM7YUFDMUIsQ0FBQyxDQUFDLFVBQUMsQ0FBTSxJQUFLLE9BQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBWCxDQUFXLENBQUMsQ0FBQzs7O1FBR2hDLElBQUksUUFBUSxHQUFRLElBQUksRUFBRTthQUNyQixDQUFDLENBQUMsVUFBQyxDQUFNLElBQUssT0FBQSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFYLENBQVcsQ0FBQzthQUMxQixDQUFDLENBQUMsVUFBQyxDQUFNLElBQUssT0FBQSxNQUFNLENBQUMsS0FBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLEVBQTNDLENBQTJDLENBQUMsQ0FBQzs7UUFFaEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2FBQzNCLElBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsU0FBUyxDQUFDO2FBQzNDLElBQUksQ0FBQyxXQUFXLEVBQUUsVUFBUSxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsTUFBRyxDQUFDO2FBQ2xGLElBQUksQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztRQUV4QyxJQUFJLENBQUMsWUFBWTthQUNaLFNBQVMsQ0FBQyxXQUFXLENBQUM7YUFDdEIsVUFBVSxFQUFFO2FBQ1osUUFBUSxDQUFDLHdCQUF3QixDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQzthQUMvRCxJQUFJLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDcEMsRUFBRSxDQUFDLEtBQUssRUFBRSxjQUFNLE9BQUEsS0FBSSxDQUFDLFlBQVksRUFBRSxFQUFuQixDQUFtQixDQUFDLENBQUM7S0FDN0M7aUNBaERMO0VBYTRDLFVBQVUsRUFvQ3JELENBQUE7QUFwQ0Qsa0NBb0NDIn0=","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { easeLinear } from 'd3-ease';\nimport { BdRenderer } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nimport { BdLineChartClasses } from '../helpers/lineChartClasses';\nvar BdBulletRenderer = /** @class */ (function (_super) {\n    __extends(BdBulletRenderer, _super);\n    function BdBulletRenderer(renderQueue, svgSelection, renderConfig, lineData, selectionManager, animate) {\n        var _this = _super.call(this, renderQueue) || this;\n        _this.svgSelection = svgSelection;\n        _this.renderConfig = renderConfig;\n        _this.lineData = lineData;\n        _this.selectionManager = selectionManager;\n        _this.animate = animate;\n        return _this;\n    }\n    BdBulletRenderer.prototype.render = function () {\n        var _this = this;\n        // for each data point in a lineData append a circle\n        var bullets = this.svgSelection.selectAll('.' + BdLineChartClasses.bulletClass)\n            .data(this.lineData)\n            .enter()\n            .append('circle')\n            .attr('class', BdLineChartClasses.bulletClass)\n            .attr('r', bdLineChartDefaultValues.bullet.bulletSize)\n            .attr('cx', function (d) { return _this.renderConfig.xRenderConfig.scale(d.x); })\n            .attr('cy', function (d) { return _this.renderConfig.yRenderConfig.scale(d.y); })\n            .style('display', function (d, index) { return index === 0 ? 'none' : ''; }) // do not render the first bullet\n            .style('opacity', this.animate ? 0 : 1); // we don't want them to be visible\n        if (!this.animate) {\n            this.finishRender();\n        }\n        else {\n            bullets.transition() // add an animation\n                .ease(easeLinear) // the animation should be linear in changing the value of opacity 0 to 1\n                .duration(bdLineChartDefaultValues.bullet.fadeDuration) // the duration of the animation in total should 150ms\n                .delay(function (d, idx) { return bdLineChartDefaultValues.bullet.animationDuration / _this.lineData.length * idx; }) // we an animation start delay depending on the index of the bullet\n                .style('opacity', 1) // end value of opacity for the animation\n                .on('end', function (d, idx) {\n                // when the last bullet is animated we can continue the render-queue\n                if (idx === _this.lineData.length - 1)\n                    _this.finishRender();\n            });\n        }\n    };\n    BdBulletRenderer.prototype.finishRender = function () {\n        var _this = this;\n        // after all animations are finished initialize the selection manager\n        this.selectionManager.init();\n        this.selectionManager.onDataPointSelected.subscribe(function (dataPoint) { return _this.selectBullet(dataPoint); });\n        // execute the next renderer\n        _super.prototype.finishRender.call(this);\n    };\n    BdBulletRenderer.prototype.selectBullet = function (dataPoint) {\n        var bullet;\n        // select the bullet corresponding to the datapoint\n        this.svgSelection.selectAll('circle').each(function (circleDataPoint, index, circles) {\n            if (circleDataPoint.x === dataPoint.x && circleDataPoint.y === dataPoint.y) {\n                bullet = circles[index];\n            }\n        });\n        if (bullet) {\n            // warn the line-chart template to update its position for the datapoint at the position of the bullet\n            this.selectionManager.positionLineChartTemplate(dataPoint, bullet);\n        }\n    };\n    return BdBulletRenderer;\n}(BdRenderer));\nexport { BdBulletRenderer };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVsbGV0UmVuZGVyZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2QzTGluZUNoYXJ0L3JlbmRlcmVycy9idWxsZXRSZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUVyQyxPQUFPLEVBRUgsVUFBVSxFQUViLE1BQU0sc0JBQXNCLENBQUM7QUFFOUIsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDckUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFJakUsSUFBQTtJQUFzQyxvQ0FBVTtJQUU1QywwQkFDSSxXQUEwQixFQUNsQixZQUFpQixFQUNqQixZQUFxQyxFQUNyQyxRQUF1QixFQUN2QixnQkFBNkMsRUFDN0MsT0FBZ0I7UUFONUIsWUFRSSxrQkFBTSxXQUFXLENBQUMsU0FDckI7UUFQVyxrQkFBWSxHQUFaLFlBQVksQ0FBSztRQUNqQixrQkFBWSxHQUFaLFlBQVksQ0FBeUI7UUFDckMsY0FBUSxHQUFSLFFBQVEsQ0FBZTtRQUN2QixzQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQTZCO1FBQzdDLGFBQU8sR0FBUCxPQUFPLENBQVM7O0tBRzNCO0lBRUQsaUNBQU0sR0FBTjtRQUFBLGlCQTBCQzs7UUF4QkcsSUFBTSxPQUFPLEdBQVEsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFHLGtCQUFrQixDQUFDLFdBQVcsQ0FBQzthQUNqRixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQzthQUNuQixLQUFLLEVBQUU7YUFDUCxNQUFNLENBQUMsUUFBUSxDQUFDO2FBQ2hCLElBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsV0FBVyxDQUFDO2FBQzdDLElBQUksQ0FBQyxHQUFHLEVBQUUsd0JBQXdCLENB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","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BdRenderer, BdTransformHelper } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nimport { BdLineChartClasses } from '../helpers/lineChartClasses';\nvar BdDraggerRenderer = /** @class */ (function (_super) {\n    __extends(BdDraggerRenderer, _super);\n    function BdDraggerRenderer(renderQueue, svgSelection, renderConfig, selectionManager) {\n        var _this = _super.call(this, renderQueue) || this;\n        _this.svgSelection = svgSelection;\n        _this.renderConfig = renderConfig;\n        _this.selectionManager = selectionManager;\n        return _this;\n    }\n    BdDraggerRenderer.prototype.render = function () {\n        var _this = this;\n        // append a container for the dragger with the dragger class\n        var draggerContainer = this.svgSelection.append('g').attr('class', BdLineChartClasses.draggerClass);\n        // append a subcontainer for the different elements of the dragger\n        this.draggerElement = draggerContainer.append('g');\n        var draggerLineHeight = this.renderConfig.size.height - bdLineChartDefaultValues.dragger.draggerElmHeight - 10;\n        // append the different elements of the dragger\n        this.draggerElement.append('rect')\n            .attr('y', 0)\n            .attr('width', bdLineChartDefaultValues.dragger.draggerElmWidth)\n            .attr('height', bdLineChartDefaultValues.dragger.draggerElmHeight)\n            .attr('rx', 9);\n        this.draggerElement.append('path')\n            .attr('class', BdLineChartClasses.draggerArrowClass)\n            .attr('transform', 'translate(0,-211)')\n            .attr('d', 'M27.305 216.062l4.684 4.881v-.865l-4.684 4.881.901.865 4.684-4.881.415-.432-.415-.432-4.684-4.881zM10.5 215.865l-4.684 4.881v-.865l4.684 4.881-.901.865-4.684-4.881-.415-.432.415-.432 4.684-4.881z');\n        this.draggerElement.append('path')\n            .attr('class', BdLineChartClasses.draggerLineClass)\n            .attr('transform', 'translate(0,-211)')\n            .attr('d', 'M18.5 204.994c-1.224 3.488-4.559 5.993-8.486 6.006l-.014.5c0 4.694 3.806 8.5 8.5 8.5s8.5-3.806 8.5-8.5l-.018-.558c-3.483-.395-6.364-2.761-7.482-5.948v-' + draggerLineHeight + 'h-1v' + draggerLineHeight + 'z');\n        // append the bullet that covers the selected point\n        this.bullet = draggerContainer.append('circle')\n            .attr('r', 4);\n        // init the selection manager, if a point is selected position the dragger\n        this.selectionManager.init();\n        this.selectionManager.onDataPointSelected.subscribe(function (dataPoint) { return _this.positionDragger(dataPoint); });\n        this.finishRender();\n    };\n    BdDraggerRenderer.prototype.positionDragger = function (dataPoint) {\n        var draggerOffsetBottom = this.renderConfig.size.height - (bdLineChartDefaultValues.dragger.draggerElmHeight * 0.5);\n        // calculate the position of the dragger by using the scales to convert from datapoint coordinates to svg coordinates\n        var x = this.renderConfig.xRenderConfig.scale(dataPoint.x);\n        var y = this.renderConfig.yRenderConfig.scale(dataPoint.y);\n        // coordinates of the maximum and minimum of the x-domain\n        var xMax = this.renderConfig.xRenderConfig.scale(this.renderConfig.xRenderConfig.max);\n        var xMin = this.renderConfig.xRenderConfig.scale(this.renderConfig.xRenderConfig.min);\n        // don't position dragger outside of the domain that is drawn\n        if (x <= xMin || x >= xMax)\n            return;\n        // position the bullet by setting center x and y\n        this.bullet.attr('cx', x).attr('cy', y);\n        // translate the dragger so it is positioned at the point\n        var draggerOffsetLeft = x - bdLineChartDefaultValues.dragger.draggerElmWidth * 0.5;\n        BdTransformHelper.applyTransformationToSelection(this.draggerElement, draggerOffsetLeft, draggerOffsetBottom);\n        // warn the linechart template to update its position for the datapoint at the position of the bullet\n        this.selectionManager.positionLineChartTemplate(dataPoint, this.bullet.node());\n    };\n    return BdDraggerRenderer;\n}(BdRenderer));\nexport { BdDraggerRenderer };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZ2dlclJlbmRlcmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjSW5saW5lZC9kM0xpbmVDaGFydC9yZW5kZXJlcnMvZHJhZ2dlclJlbmRlcmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBRUgsVUFBVSxFQUVWLGlCQUFpQixFQUNwQixNQUFNLHNCQUFzQixDQUFDO0FBRTlCLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBSWpFLElBQUE7SUFBdUMscUNBQVU7SUFJN0MsMkJBQ0ksV0FBMEIsRUFDbEIsWUFBaUIsRUFDakIsWUFBcUMsRUFDckMsZ0JBQTZDO1FBSnpELFlBTUksa0JBQU0sV0FBVyxDQUFDLFNBQ3JCO1FBTFcsa0JBQVksR0FBWixZQUFZLENBQUs7UUFDakIsa0JBQVksR0FBWixZQUFZLENBQXlCO1FBQ3JDLHNCQUFnQixHQUFoQixnQkFBZ0IsQ0FBNkI7O0tBR3hEO0lBRUQsa0NBQU0sR0FBTjtRQUFBLGlCQThCQzs7UUE1QkcsSUFBSSxnQkFBZ0IsR0FBUSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxDQUFDOztRQUV6RyxJQUFJLENBQUMsY0FBYyxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNuRCxJQUFNLGlCQUFpQixHQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDOztRQUV6SCxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDN0IsSUFBSSxD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","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { area } from 'd3-shape';\nimport { easeLinear } from 'd3-ease';\nimport { max } from 'd3-array';\nimport { BdAxisClasses, BdRenderer } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nimport { BdLineChartClasses } from '../helpers/lineChartClasses';\nvar BdGradientRenderer = /** @class */ (function (_super) {\n    __extends(BdGradientRenderer, _super);\n    function BdGradientRenderer(renderQueue, svgSelection, renderConfig, lineData, animate) {\n        var _this = _super.call(this, renderQueue) || this;\n        _this.svgSelection = svgSelection;\n        _this.renderConfig = renderConfig;\n        _this.lineData = lineData;\n        _this.animate = animate;\n        return _this;\n    }\n    BdGradientRenderer.prototype.render = function () {\n        var _this = this;\n        // get the scale functions for each axis\n        var xScale = this.renderConfig.xRenderConfig.scale;\n        var yScale = this.renderConfig.yRenderConfig.scale;\n        // make an area function that will return coordinates for the gradient\n        var theArea = area()\n            .x(function (d) { return xScale(d.x); }) // svg x coordinate of the gradient is datapoint.x converted to svg coordinate space by xScale\n            .y0(function (d) { return yScale(_this.renderConfig.yRenderConfig.min); }) // svg y0 coordinate (gradient start) of the gradient is y min value of the axis converted to svg coordinate space by xScale\n            .y1(function (d) { return yScale(d.y); }); // svg y1 coordinate (gradient stop) of the gradient is datapoint.x converted to svg coordinate space by xScale\n        // make a gradient defenition\n        var gradientDefenition = this.svgSelection.append('defs')\n            .append('linearGradient')\n            .attr('id', BdLineChartClasses.getGradientClass(this.renderConfig.id))\n            .attr('gradientUnits', 'userSpaceOnUse')\n            .attr('x1', 0)\n            .attr('y1', yScale(max(this.lineData, function (dataPoint) { return dataPoint.y; })))\n            .attr('x2', 0)\n            .attr('y2', yScale(this.renderConfig.yRenderConfig.min));\n        gradientDefenition\n            .append('stop')\n            .attr('class', BdLineChartClasses.gradientStartClass)\n            .attr('stop-opacity', 0)\n            .attr('offset', '0%');\n        gradientDefenition\n            .append('stop')\n            .attr('class', BdLineChartClasses.gradientStopClass)\n            .attr('offset', '100%');\n        // append a path using the area function to plot all path coordinates\n        this.svgSelection.append('path')\n            .attr('class', BdLineChartClasses.areaClass)\n            .attr('id', 'ng2-c-chart__area')\n            .style('fill', \"url(#\" + BdLineChartClasses.getGradientClass(this.renderConfig.id) + \")\") // use de gradient defenition as the fill\n            .attr('clip-path', \"url(#\" + BdAxisClasses.getClipPathClass(this.renderConfig.id) + \")\") // use the clippath\n            .attr('d', theArea(this.lineData));\n        // let the gradient fade in\n        var animationDuration = this.animate ? bdLineChartDefaultValues.transitionDurationFast : 0;\n        this.svgSelection.select(\"stop.\" + BdLineChartClasses.gradientStartClass)\n            .transition()\n            .duration(animationDuration)\n            .ease(easeLinear)\n            .attr('stop-opacity', 0.35)\n            .on('end', function () { return _this.finishRender(); }); // call the next renderer when the animation finishes\n    };\n    return BdGradientRenderer;\n}(BdRenderer));\nexport { BdGradientRenderer };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhZGllbnRSZW5kZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZDNMaW5lQ2hhcnQvcmVuZGVyZXJzL2dyYWRpZW50UmVuZGVyZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQVEsTUFBTSxVQUFVLENBQUM7QUFDdEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRS9CLE9BQU8sRUFDSCxhQUFhLEVBRWIsVUFBVSxFQUViLE1BQU0sc0JBQXNCLENBQUM7QUFFOUIsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDckUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFHakUsSUFBQTtJQUF3QyxzQ0FBVTtJQUU5Qyw0QkFDSSxXQUEwQixFQUNsQixZQUFpQixFQUNqQixZQUFxQyxFQUNyQyxRQUF1QixFQUN2QixPQUFnQjtRQUw1QixZQU9JLGtCQUFNLFdBQVcsQ0FBQyxTQUNyQjtRQU5XLGtCQUFZLEdBQVosWUFBWSxDQUFLO1FBQ2pCLGtCQUFZLEdBQVosWUFBWSxDQUF5QjtRQUNyQyxjQUFRLEdBQVIsUUFBUSxDQUFlO1FBQ3ZCLGFBQU8sR0FBUCxPQUFPLENBQVM7O0tBRzNCO0lBRUQsbUNBQU0sR0FBTjtRQUFBLGlCQTZDQzs7UUEzQ0csSUFBTSxNQUFNLEdBQWEsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO1FBQy9ELElBQU0sTUFBTSxHQUFhLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQzs7UUFFL0QsSUFBSSxPQUFPLEdBQWMsSUFBSSxFQUFFO2FBQzFCLENBQUMsQ0FBQyxVQUFDLENBQU0sSUFBSyxPQUFBLE1B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","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BasePositioningData } from '@delen/bd-chart-core';\nvar LineChartPositioningData = /** @class */ (function (_super) {\n    __extends(LineChartPositioningData, _super);\n    function LineChartPositioningData(position, dataPoint, boundingRect) {\n        var _this = _super.call(this, position, dataPoint) || this;\n        _this.position = position;\n        _this.dataPoint = dataPoint;\n        _this.boundingRect = boundingRect;\n        return _this;\n    }\n    return LineChartPositioningData;\n}(BasePositioningData));\nexport { LineChartPositioningData };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZS1jaGFydC1wb3NpdGlvbmluZy1kYXRhLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjSW5saW5lZC9kM0xpbmVDaGFydC9oZWxwZXJzL2xpbmUtY2hhcnQtcG9zaXRpb25pbmctZGF0YS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFFLG1CQUFtQixFQUE4QixNQUFNLHNCQUFzQixDQUFDO0FBR3ZGLElBQUE7SUFBOEMsNENBQW1CO0lBQzdELGtDQUNXLFFBQXVCLEVBQ3ZCLFNBQXNCLEVBQ3RCLFlBQXVCO1FBSGxDLFlBS0ksa0JBQU0sUUFBUSxFQUFFLFNBQVMsQ0FBQyxTQUM3QjtRQUxVLGNBQVEsR0FBUixRQUFRLENBQWU7UUFDdkIsZUFBUyxHQUFULFNBQVMsQ0FBYTtRQUN0QixrQkFBWSxHQUFaLFlBQVksQ0FBVzs7S0FHakM7bUNBVkw7RUFHOEMsbUJBQW1CLEVBUWhFLENBQUE7QUFSRCxvQ0FRQyJ9","import { bisector } from 'd3-array';\nimport { mouse } from 'd3-selection';\nimport { Subject } from 'rxjs/Subject';\nimport { BdDOMRect } from '@delen/bd-utilities';\nimport { BdAxisDirection, BdCoordinates } from '@delen/bd-chart-core';\nimport { BdChartSelectionType } from './chartSelectionType';\nimport { BdLineChartClasses } from './lineChartClasses';\nimport { LineChartPositioningData } from './line-chart-positioning-data';\nvar BdLineChartSelectionManager = /** @class */ (function () {\n    function BdLineChartSelectionManager(svgSelection, svgElement, renderConfig, lineData, axisSvgQueries, selectionType) {\n        var _this = this;\n        this.svgSelection = svgSelection;\n        this.svgElement = svgElement;\n        this.renderConfig = renderConfig;\n        this.lineData = lineData;\n        this.axisSvgQueries = axisSvgQueries;\n        this.selectionType = selectionType;\n        this.closestPointHandler = function () { return _this.getClosestDataPoint(); };\n        this.selectDataPointSubject = new Subject();\n        this.lineChartTemplateSubject = new Subject();\n    }\n    Object.defineProperty(BdLineChartSelectionManager.prototype, \"onDataPointSelected\", {\n        get: function () {\n            return this.selectDataPointSubject;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdLineChartSelectionManager.prototype, \"onUpdateLineChartTemplate\", {\n        get: function () {\n            return this.lineChartTemplateSubject;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdLineChartSelectionManager.prototype, \"selectionAreaBoundingRect\", {\n        get: function () {\n            return BdDOMRect.fromClientRect(this.svgElement.getBoundingClientRect());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BdLineChartSelectionManager.prototype.init = function () {\n        // draw an overlay over the graph with event handlers attached to make selections\n        this.selectionOverlay = this.svgSelection.append('g') // select(this.element)\n            .append('rect')\n            .attr('class', BdLineChartClasses.draggerSelectionOverlayClass)\n            .attr('width', this.renderConfig.size.width + this.renderConfig.margins.left + this.renderConfig.margins.right)\n            .attr('height', this.renderConfig.size.height + this.renderConfig.margins.bottom);\n        // add event handlers depending on the selection type\n        if (this.selectionType === BdChartSelectionType.Dragger) {\n            this.selectionOverlay\n                .on('touchmove', this.closestPointHandler)\n                .on('mousemove', this.closestPointHandler);\n        }\n        else if (this.selectionType === BdChartSelectionType.Bullet) {\n            this.bulletEventName = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n            this.selectionOverlay.on(this.bulletEventName, this.closestPointHandler);\n        }\n    };\n    BdLineChartSelectionManager.prototype.selectDataPoint = function (dataPoint) {\n        // make a render react to the selection of a datapoint\n        this.selectDataPointSubject.next(dataPoint);\n    };\n    BdLineChartSelectionManager.prototype.positionLineChartTemplate = function (dataPoint, bullet) {\n        // the renderer will call this to let the linechart be placed on the screen coordinates give by the renderer\n        this.lineChartTemplateSubject.next(new LineChartPositioningData(this.getScreenCoords(dataPoint, bullet), dataPoint, this.selectionAreaBoundingRect));\n    };\n    BdLineChartSelectionManager.prototype.destroy = function () {\n        // d3 way of removing eventhandlers\n        if (this.selectionOverlay) {\n            this.selectionOverlay.on('touchmove', null);\n            this.selectionOverlay.on('mousemove', null);\n            this.selectionOverlay.on(this.bulletEventName, null);\n        }\n        // unsubscribe everything\n        this.selectDataPointSubject.unsubscribe();\n        this.lineChartTemplateSubject.unsubscribe();\n    };\n    /**\n     * https://www.sitepoint.com/how-to-translate-from-dom-to-svg-coordinates-and-back-again/\n     * convert datapoint to svg coordinates and then\n     * convert from svg coordinate system to screen position\n     * we need these coordinates to position the line-chart template\n     */\n    /**\n         * https://www.sitepoint.com/how-to-translate-from-dom-to-svg-coordinates-and-back-again/\n         * convert datapoint to svg coordinates and then\n         * convert from svg coordinate system to screen position\n         * we need these coordinates to position the line-chart template\n         */\n    BdLineChartSelectionManager.prototype.getScreenCoords = /**\n         * https://www.sitepoint.com/how-to-translate-from-dom-to-svg-coordinates-and-back-again/\n         * convert datapoint to svg coordinates and then\n         * convert from svg coordinate system to screen position\n         * we need these coordinates to position the line-chart template\n         */\n    function (dataPoint, bullet) {\n        var svgPoint = this.svgElement.createSVGPoint();\n        // convert the datapoint value to svg coordinates\n        svgPoint.x = this.renderConfig.xRenderConfig.scale(dataPoint.x);\n        svgPoint.y = this.renderConfig.yRenderConfig.scale(dataPoint.y);\n        // transform the svg coordinates using the transformationmatrix of the bullet to get screen coordinates\n        var screenPoint = svgPoint.matrixTransform(bullet.getCTM());\n        return new BdCoordinates(screenPoint.x, screenPoint.y);\n    };\n    /**\n     * find the closest data point to the mouse position\n     */\n    /**\n         * find the closest data point to the mouse position\n         */\n    BdLineChartSelectionManager.prototype.getClosestDataPoint = /**\n         * find the closest data point to the mouse position\n         */\n    function () {\n        // this will create a function that will find the closest datapoint\n        var bisectDataPoint = bisector(function (dp) { return dp.x; }).left;\n        var xAxisElement = this.axisSvgQueries.getAxis(BdAxisDirection.X).node();\n        var d3Mouse = mouse(xAxisElement);\n        // convert the mouse x coordinate to a chart value\n        var mouseValue = this.renderConfig.xRenderConfig.scale.invert(d3Mouse[0]);\n        // find the closest datapoint to the chart value of mouse x\n        var index = bisectDataPoint(this.lineData, mouseValue); // index to the closest data item\n        var dataPoint;\n        if (index === 0) {\n            dataPoint = this.lineData[index];\n        }\n        else if (index > this.lineData.length - 1) {\n            dataPoint = this.lineData[this.lineData.length - 1];\n        }\n        else {\n            var dataPoint0 = this.lineData[index - 1];\n            var dataPoint1 = this.lineData[index];\n            // get data value is closest to the event\n            dataPoint = mouseValue - dataPoint0.x > dataPoint1.x - mouseValue ? dataPoint1 : dataPoint0;\n        }\n        if (this.selectionType === BdChartSelectionType.Dragger && this.previousSelectedDataPoint !== dataPoint) {\n            this.previousSelectedDataPoint = dataPoint;\n            this.selectDataPoint(dataPoint); // let the DraggerRenderer select the datapoint\n        }\n        else {\n            if (dataPoint !== this.lineData[0]) {\n                this.previousSelectedDataPoint = dataPoint;\n                this.selectDataPoint(dataPoint); // let the BulletRenderer select the datapoint\n            }\n        }\n    };\n    return BdLineChartSelectionManager;\n}());\nexport { BdLineChartSelectionManager };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZUNoYXJ0U2VsZWN0aW9uTWFuYWdlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyY0lubGluZWQvZDNMaW5lQ2hhcnQvaGVscGVycy9saW5lQ2hhcnRTZWxlY3Rpb25NYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDcEMsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUVyQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXZDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFvQixhQUFhLEVBQWUsTUFBTSxzQkFBc0IsQ0FBQztBQUVyRyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUM1RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUV4RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUV6RSxJQUFBO0lBeUJJLHFDQUNZLFlBQWlCLEVBQ2pCLFVBQWUsRUFDZixZQUFxQyxFQUNyQyxRQUF1QixFQUN2QixjQUFnQyxFQUNoQyxhQUFtQztRQU4vQyxpQkFVQztRQVRXLGlCQUFZLEdBQVosWUFBWSxDQUFLO1FBQ2pCLGVBQVUsR0FBVixVQUFVLENBQUs7UUFDZixpQkFBWSxHQUFaLFlBQVksQ0FBeUI7UUFDckMsYUFBUSxHQUFSLFFBQVEsQ0FBZTtRQUN2QixtQkFBYyxHQUFkLGNBQWMsQ0FBa0I7UUFDaEMsa0JBQWEsR0FBYixhQUFhLENBQXNCO21DQThEUCxjQUFNLE9BQUEsS0FBSSxDQUFDLG1CQUFtQixFQUFFLEVBQTFCLENBQTBCO1FBNURwRSxJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxPQUFPLEVBQWUsQ0FBQztR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","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { line } from 'd3-shape';\nimport { BdRenderer } from '@delen/bd-chart-core';\nimport { BdLineChartClasses } from '../helpers/lineChartClasses';\nvar BdLineRenderer = /** @class */ (function (_super) {\n    __extends(BdLineRenderer, _super);\n    function BdLineRenderer(renderQueue, svgSelection, renderConfig, lineData) {\n        var _this = _super.call(this, renderQueue) || this;\n        _this.svgSelection = svgSelection;\n        _this.renderConfig = renderConfig;\n        _this.lineData = lineData;\n        return _this;\n    }\n    BdLineRenderer.prototype.render = function () {\n        // get the scales functions of the axis\n        var xScale = this.renderConfig.xRenderConfig.scale;\n        var yScale = this.renderConfig.yRenderConfig.scale;\n        // make a line function that will plot from datapoint coordinate space to svg coordinate space using the scales\n        var valueline = line()\n            .x(function (d) { return xScale(d.x); })\n            .y(function (d) { return yScale(d.y); });\n        // append a path, the path wil be plotted using the value line function\n        this.svgSelection.append('path')\n            .attr('class', BdLineChartClasses.lineClass)\n            .attr('clip-path', \"url(#ng2-c-chart__clip-\" + this.renderConfig.id + \")\")\n            .attr('d', valueline(this.lineData));\n        this.finishRender();\n    };\n    return BdLineRenderer;\n}(BdRenderer));\nexport { BdLineRenderer };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZVJlbmRlcmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjSW5saW5lZC9kM0xpbmVDaGFydC9yZW5kZXJlcnMvbGluZVJlbmRlcmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRWhDLE9BQU8sRUFFSCxVQUFVLEVBRWIsTUFBTSxzQkFBc0IsQ0FBQztBQUU5QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUdqRSxJQUFBO0lBQW9DLGtDQUFVO0lBRTFDLHdCQUNJLFdBQTBCLEVBQ2xCLFlBQWlCLEVBQ2pCLFlBQXFDLEVBQ3JDLFFBQXVCO1FBSm5DLFlBTUksa0JBQU0sV0FBVyxDQUFDLFNBQ3JCO1FBTFcsa0JBQVksR0FBWixZQUFZLENBQUs7UUFDakIsa0JBQVksR0FBWixZQUFZLENBQXlCO1FBQ3JDLGNBQVEsR0FBUixRQUFRLENBQWU7O0tBR2xDO0lBRUQsK0JBQU0sR0FBTjs7UUFFSSxJQUFJLE1BQU0sR0FBYSxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7UUFDN0QsSUFBSSxNQUFNLEdBQWEsSUFBSSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDOztRQUU3RCxJQUFJLFNBQVMsR0FBUSxJQUFJLEVBQUU7YUFDdEIsQ0FBQyxDQUFDLFVBQUMsQ0FBTSxJQUFLLE9BQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBWCxDQUFXLENBQUM7YUFDMUIsQ0FBQyxDQUFDLFVBQUMsQ0FBTSxJQUFLLE9BQUEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBWCxDQUFXLENBQUMsQ0FBQzs7UUFFaEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2FBQzNCLElBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsU0FBUyxDQUFDO2FBQzNDLElBQUksQ0FBQyxXQUFXLEVBQUUsNEJBQTBCLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxNQUFHLENBQUM7YUFDcEUsSUFBSSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0tBQ3ZCO3lCQXBDTDtFQVdvQyxVQUFVLEVBMkI3QyxDQUFBO0FBM0JELDBCQTJCQyJ9","import { select } from 'd3-selection';\nimport { BdAddFirstTimeTickIfMissingRenderer, BdAxisDataType, BdAxisRenderer, BdAxisSvgQueries, BdCenterLabelsBetweenTicksRenderer, BdClipPathRenderer, BdRemoveClippedLabelsRenderer, BdRenderQueue, BdTickRenderer, BdTransformChartRenderer } from '@delen/bd-chart-core';\nimport { BdAnimatedLineRenderer } from './renderers/animatedLineRenderer';\nimport { BdBulletRenderer } from './renderers/bulletRenderer';\nimport { BdChartSelectionType } from './helpers/chartSelectionType';\nimport { BdDraggerRenderer } from './renderers/draggerRenderer';\nimport { BdGradientRenderer } from './renderers/gradientRenderer';\nimport { BdLineChartSelectionManager } from './helpers/lineChartSelectionManager';\nimport { BdLineRenderer } from './renderers/lineRenderer';\nvar BdLineChartRenderComposition = /** @class */ (function () {\n    function BdLineChartRenderComposition(element, renderConfig, lineChartData, selectionType, animate) {\n        this.element = element;\n        this.renderConfig = renderConfig;\n        this.lineChartData = lineChartData;\n        this.selectionType = selectionType;\n        this.animate = animate;\n        // append and a graphic alement to the svg that will contain the whole chart\n        this.svgSelection = select(element).append('g');\n        // d3 is like jquery we use the svg selection manager so we only have to traverse the SVG dom once when making selections\n        this.axisSvgQueries = new BdAxisSvgQueries(this.svgSelection);\n        // this is used to capture events for selections\n        this._selectionManager = new BdLineChartSelectionManager(this.svgSelection, this.element, this.renderConfig, this.lineChartData, this.axisSvgQueries, this.selectionType);\n        // build all te subrenderers\n        this.buildRenderQueue();\n    }\n    Object.defineProperty(BdLineChartRenderComposition.prototype, \"lineChartTemplateSubject\", {\n        get: function () {\n            return this._selectionManager.onUpdateLineChartTemplate;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdLineChartRenderComposition.prototype, \"selectionBoundingRect\", {\n        get: function () {\n            return this._selectionManager.selectionAreaBoundingRect;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdLineChartRenderComposition.prototype, \"onRenderFinished\", {\n        get: function () {\n            return this.renderQueue.onRenderQueueFinished;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * render the whole queue\n     */\n    /**\n         * render the whole queue\n         */\n    BdLineChartRenderComposition.prototype.render = /**\n         * render the whole queue\n         */\n    function () {\n        this.renderQueue.startRendering();\n    };\n    BdLineChartRenderComposition.prototype.destroy = function () {\n        // unsubsribe observables and destroy event handlers\n        this._selectionManager.destroy();\n        // remove all nodes from the svg element\n        this.svgSelection.node().parentNode.textContent = '';\n    };\n    /**\n     * select a data point on the chart\n     * @param {BdDataPoint} dataPoint\n     */\n    /**\n         * select a data point on the chart\n         * @param {BdDataPoint} dataPoint\n         */\n    BdLineChartRenderComposition.prototype.selectDataPoint = /**\n         * select a data point on the chart\n         * @param {BdDataPoint} dataPoint\n         */\n    function (dataPoint) {\n        this._selectionManager.selectDataPoint(dataPoint);\n    };\n    /***\n     * order of adding to the renderQueue is important because:\n     * - some renderers modify elements created by previously executed renderers\n     * - some stuff needs to be added after animations\n     */\n    /***\n         * order of adding to the renderQueue is important because:\n         * - some renderers modify elements created by previously executed renderers\n         * - some stuff needs to be added after animations\n         */\n    BdLineChartRenderComposition.prototype.buildRenderQueue = /***\n         * order of adding to the renderQueue is important because:\n         * - some renderers modify elements created by previously executed renderers\n         * - some stuff needs to be added after animations\n         */\n    function () {\n        this.renderQueue = new BdRenderQueue();\n        // render the axis and ticks\n        this.renderQueue\n            .add(new BdAxisRenderer(this.renderQueue, this.svgSelection, this.renderConfig.size, this.renderConfig.xRenderConfig))\n            .add(new BdTickRenderer(this.renderQueue, this.svgSelection, this.renderConfig.size, this.renderConfig.xRenderConfig))\n            .add(new BdAxisRenderer(this.renderQueue, this.svgSelection, this.renderConfig.size, this.renderConfig.yRenderConfig))\n            .add(new BdTickRenderer(this.renderQueue, this.svgSelection, this.renderConfig.size, this.renderConfig.yRenderConfig))\n            .add(new BdClipPathRenderer(this.renderQueue, this.svgSelection, this.renderConfig.size, this.renderConfig.id));\n        // modify the rendered axis\n        if (this.renderConfig.xRenderConfig.dataType === BdAxisDataType.Date) {\n            this.renderQueue\n                .add(new BdAddFirstTimeTickIfMissingRenderer(this.renderQueue, this.renderConfig.xRenderConfig, this.axisSvgQueries))\n                .add(new BdCenterLabelsBetweenTicksRenderer(this.renderQueue, this.renderConfig.xRenderConfig, this.axisSvgQueries, this.renderConfig.size));\n        }\n        if (this.renderConfig.yRenderConfig.dataType === BdAxisDataType.Date) {\n            this.renderQueue\n                .add(new BdAddFirstTimeTickIfMissingRenderer(this.renderQueue, this.renderConfig.yRenderConfig, this.axisSvgQueries))\n                .add(new BdCenterLabelsBetweenTicksRenderer(this.renderQueue, this.renderConfig.yRenderConfig, this.axisSvgQueries, this.renderConfig.size));\n        }\n        this.renderQueue.add(new BdRemoveClippedLabelsRenderer(this.renderQueue, this.axisSvgQueries));\n        // add some transformations the chart to make everything fit\n        this.renderQueue.add(new BdTransformChartRenderer(this.renderQueue, this.svgSelection, this.renderConfig.xRenderConfig, this.renderConfig.yRenderConfig, this.axisSvgQueries, this.renderConfig.margins));\n        // take different renderer for the line when animating animations\n        if (this.animate) {\n            this.renderQueue.add(new BdAnimatedLineRenderer(this.renderQueue, this.svgSelection, this.renderConfig, this.lineChartData));\n        }\n        else {\n            this.renderQueue.add(new BdLineRenderer(this.renderQueue, this.svgSelection, this.renderConfig, this.lineChartData));\n        }\n        // add the gradient and selection stuff after animation of line\n        this.renderQueue.add(new BdGradientRenderer(this.renderQueue, this.svgSelection, this.renderConfig, this.lineChartData, this.animate));\n        if (this.selectionType === BdChartSelectionType.Bullet) {\n            this.renderQueue.add(new BdBulletRenderer(this.renderQueue, this.svgSelection, this.renderConfig, this.lineChartData, this._selectionManager, this.animate));\n        }\n        if (this.selectionType === BdChartSelectionType.Dragger) {\n            this.renderQueue.add(new BdDraggerRenderer(this.renderQueue, this.svgSelection, this.renderConfig, this._selectionManager));\n        }\n    };\n    return BdLineChartRenderComposition;\n}());\nexport { BdLineChartRenderComposition };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZUNoYXJ0UmVuZGVyQ29tcG9zaXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2QzTGluZUNoYXJ0L2xpbmVDaGFydFJlbmRlckNvbXBvc2l0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFFdEMsT0FBTyxFQUNILG1DQUFtQyxFQUNuQyxjQUFjLEVBQ2QsY0FBYyxFQUNkLGdCQUFnQixFQUNoQixrQ0FBa0MsRUFDbEMsa0JBQWtCLEVBRWxCLDZCQUE2QixFQUM3QixhQUFhLEVBQ2IsY0FBYyxFQUNkLHdCQUF3QixFQUUzQixNQUFNLHNCQUFzQixDQUFDO0FBRzlCLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzlELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRWxFLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQ2xGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUcxRCxJQUFBO0lBb0JJLHNDQUNZLE9BQVksRUFDWixZQUFxQyxFQUNyQyxhQUE0QixFQUM1QixhQUFtQyxFQUNuQyxPQUFnQjtRQUpoQixZQUFPLEdBQVAsT0FBTyxDQUFLO1FBQ1osaUJBQVksR0FBWixZQUFZLENBQXlCO1FBQ3JDLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQzVCLGtCQUFhLEdBQWIsYUFBYSxDQUFzQjtRQUNuQyxZQUFPLEdBQVAsT0FBTyxDQUFTOztRQUd4QixJQUFJ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","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { min as d3Min, max as d3Max } from 'd3-array';\nimport { select } from 'd3-selection';\nimport { BdAxisDirection, BdTimeAxisRenderConfig, BdNumericAxisRenderConfig, BdAxisDataType, BdGraphSizeHelper } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nimport { BdChartSelectionType } from '../helpers/chartSelectionType';\n/**\n * the settings passed to the graph need to be translated to something d3 can use to render\n * this class holds values derived from the configuration bound to the chart component\n * these derived values can be used in d3\n * to get a better insight look at BdAxisRenderConfig which is derived from NumericAxisConfig An TimeAxisConfig\n */\nvar /**\n * the settings passed to the graph need to be translated to something d3 can use to render\n * this class holds values derived from the configuration bound to the chart component\n * these derived values can be used in d3\n * to get a better insight look at BdAxisRenderConfig which is derived from NumericAxisConfig An TimeAxisConfig\n */\nBdLineChartRenderConfig = /** @class */ (function () {\n    function BdLineChartRenderConfig(svgElement, xAxisConfig, yAxisConfig, selectionType, id, lineChartData, container, chartHeight) {\n        this.id = id;\n        this.lineChartData = lineChartData;\n        this.container = container;\n        this.chartHeight = chartHeight;\n        this.svgSelection = select(svgElement);\n        // we need a copy of the margins because they will be adapted by the code and we don't want them to be changed when we rerender\n        this.margins = selectionType === BdChartSelectionType.Dragger ? __assign({}, bdLineChartDefaultValues.margins.draggerSelectionMargins) : __assign({}, bdLineChartDefaultValues.margins.defaultMargins);\n        var xMin = this.getMinFromData(BdAxisDirection.X);\n        var xMax = this.getMaxFromData(BdAxisDirection.X);\n        var yMin = this.getMinFromData(BdAxisDirection.Y);\n        var yMax = this.getMaxFromData(BdAxisDirection.Y);\n        this.size = new BdGraphSizeHelper(svgElement, this.margins, xAxisConfig, yAxisConfig, lineChartData, yMin, yMax, bdLineChartDefaultValues.defaultSize, this.container, this.chartHeight).getSize();\n        switch (xAxisConfig.dataType) {\n            case BdAxisDataType.Date:\n                this.xRenderConfig = new BdTimeAxisRenderConfig(BdAxisDirection.X, xAxisConfig, this.size, xMin, xMax, lineChartData);\n                break;\n            case BdAxisDataType.Number:\n                this.xRenderConfig = new BdNumericAxisRenderConfig(BdAxisDirection.X, xAxisConfig, this.size, xMin, xMax, lineChartData);\n                break;\n            default:\n                break;\n        }\n        switch (yAxisConfig.dataType) {\n            case BdAxisDataType.Date:\n                this.yRenderConfig = new BdTimeAxisRenderConfig(BdAxisDirection.Y, yAxisConfig, this.size, yMin, yMax, lineChartData);\n                break;\n            case BdAxisDataType.Number:\n                this.yRenderConfig = new BdNumericAxisRenderConfig(BdAxisDirection.Y, yAxisConfig, this.size, yMin, yMax, lineChartData);\n                break;\n            default:\n                break;\n        }\n    }\n    // get the minimum x or y (depending on axis direction) from the data\n    // get the minimum x or y (depending on axis direction) from the data\n    BdLineChartRenderConfig.prototype.getMinFromData = \n    // get the minimum x or y (depending on axis direction) from the data\n    function (axisDirection) {\n        var min = Number.MAX_VALUE;\n        var lineDataMin = d3Min(this.lineChartData, function (dataPoint) { return axisDirection === BdAxisDirection.X ? dataPoint.x : dataPoint.y; });\n        min = Math.min(lineDataMin, min);\n        return min;\n    };\n    // get the maximum x or y (depending on axis direction) from the data\n    // get the maximum x or y (depending on axis direction) from the data\n    BdLineChartRenderConfig.prototype.getMaxFromData = \n    // get the maximum x or y (depending on axis direction) from the data\n    function (axisDirection) {\n        var max = Number.MIN_VALUE;\n        var lineDataMax = d3Max(this.lineChartData, function (dataPoint) { return axisDirection === BdAxisDirection.X ? dataPoint.x : dataPoint.y; });\n        max = Math.max(lineDataMax, max);\n        return max;\n    };\n    return BdLineChartRenderConfig;\n}());\n/**\n * the settings passed to the graph need to be translated to something d3 can use to render\n * this class holds values derived from the configuration bound to the chart component\n * these derived values can be used in d3\n * to get a better insight look at BdAxisRenderConfig which is derived from NumericAxisConfig An TimeAxisConfig\n */\nexport { BdLineChartRenderConfig };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZUNoYXJ0UmVuZGVyQ29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjSW5saW5lZC9kM0xpbmVDaGFydC9yZW5kZXJDb25maWcvbGluZUNoYXJ0UmVuZGVyQ29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFFLEdBQUcsSUFBSSxLQUFLLEVBQUUsR0FBRyxJQUFJLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsTUFBTSxFQUFhLE1BQU0sY0FBYyxDQUFDO0FBRWpELE9BQU8sRUFFSCxlQUFlLEVBRWYsc0JBQXNCLEVBQ3RCLHlCQUF5QixFQUN6QixjQUFjLEVBRWQsaUJBQWlCLEVBR3BCLE1BQU0sc0JBQXNCLENBQUM7QUFFOUIsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDckUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sK0JBQStCLENBQUM7Ozs7Ozs7QUFRckU7Ozs7OztBQUFBO0lBT0ksaUNBQ0ksVUFBc0IsRUFDdEIsV0FBeUIsRUFDekIsV0FBeUIsRUFDekIsYUFBbUMsRUFDNUIsRUFBVSxFQUNULGFBQTRCLEVBQzVCLFNBQWtCLEVBQ2xCLFdBQW9CO1FBSHJCLE9BQUUsR0FBRixFQUFFLENBQVE7UUFDVCxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUM1QixjQUFTLEdBQVQsU0FBUyxDQUFTO1FBQ2xCLGdCQUFXLEdBQVgsV0FBVyxDQUFTO1FBRTVCLElBQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDOztRQUV2QyxJQUFJLENBQUMsT0FBTyxHQUFHLGFBQWEsS0FBSyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxjQUFLLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLGNBQUssd0JBQXdCLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBRXJMLElBQU0sSUFBSSxHQUFXLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQU0sSUFBSSxHQUFXLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQU0sSUFBSSxHQUFXLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQU0sSUFBSSxHQUFXLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTVELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLHdCQUF3QixDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuTSxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUMzQixLQUFLLGNBQWMsQ0FBQyxJQUFJO2dCQUNwQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksc0JBQXNCLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDO2dCQUN0SCxLQUFLLENBQUM7WUFDVixLQUFLLGNBQWMsQ0FBQyxNQUFNO2dCQUN0QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUkseUJBQXlCLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDO2dCQUN6SCxLQUFLLENBQUM7WUFDVjtnQkFDSSxLQUFLLENBQUM7U0FDYjtRQUVELE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQzNCLEtBQUssY0FBYyxDQUFDLElBQUk7Z0JBQ3BCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxzQkFBc0IsQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7Z0JBQ3RILEtBQUssQ0FBQztZQUNWLEtBQUssY0FBYyxDQUFDLE1BQU07Z0JBQ3RCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSx5QkFBeUIsQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7Z0JBQ3pILEtBQUssQ0FBQztZQUNWO2dCQUNJLEtBQUssQ0FBQztTQUNiO0tBQ0o7SUFFRCxxRUFBcUU7O0lBQzdELGdEQUFjOztJQUF0QixVQUF1QixhQUE4QjtRQUNqRCxJQUFJLEdBQUcsR0FBVyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ25DLElBQUksV0FBVyxHQUFtQixLQUFLLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFDLFNBQXNCLElBQUssT0FBQSxhQUFhLEtBQUssZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBL0QsQ0FBK0QsQ0FBQyxDQUFDO1FBQ3pKLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDO0tBQ2Q7SUFFRCxxRUFBcUU7O0lBQzdELGdEQUFjOztJQUF0QixVQUF1QixhQUE4QjtRQUNqRCxJQUFJLEdBQUcsR0FBVyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ25DLElBQUksV0FBVyxHQUFtQixLQUFLLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFDLFNBQXNCLElBQUssT0FBQSxhQUFhLEtBQUssZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBL0QsQ0FBK0QsQ0FBQyxDQUFDO1FBQ3pKLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsR0FBRyxDQUFDO0tBQ2Q7a0NBekZMO0lBMEZDLENBQUE7Ozs7Ozs7QUFqRUQsbUNBaUVDIn0=","import { BdLineChartRenderComposition } from './lineChartRenderComposition';\nimport { BdLineChartRenderConfig } from './renderConfig/lineChartRenderConfig';\nvar BdD3LineChart = /** @class */ (function () {\n    function BdD3LineChart(svgElement, xAxisConfig, yAxisConfig, lineChartData, selectionType, id, container, animate, chartHeight) {\n        this.svgElement = svgElement;\n        this.lineChartData = lineChartData;\n        this.renderConfig = new BdLineChartRenderConfig(this.svgElement, xAxisConfig, yAxisConfig, selectionType, id, lineChartData, container, chartHeight);\n        this.lineChartRenderComposition = new BdLineChartRenderComposition(this.svgElement, this.renderConfig, lineChartData, selectionType, animate);\n    }\n    Object.defineProperty(BdD3LineChart.prototype, \"lineChartTemplateSubject\", {\n        get: function () {\n            return this.lineChartRenderComposition.lineChartTemplateSubject;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdD3LineChart.prototype, \"selectionBoundingRect\", {\n        get: function () {\n            return this.lineChartRenderComposition.selectionBoundingRect;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BdD3LineChart.prototype, \"onRenderFinished\", {\n        get: function () {\n            return this.lineChartRenderComposition.onRenderFinished;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BdD3LineChart.prototype.render = function () {\n        this.lineChartRenderComposition.render();\n    };\n    BdD3LineChart.prototype.destroy = function () {\n        this.lineChartRenderComposition.destroy();\n    };\n    BdD3LineChart.prototype.selectDataPoint = function (dataPoint) {\n        this.lineChartRenderComposition.selectDataPoint(dataPoint);\n    };\n    return BdD3LineChart;\n}());\nexport { BdD3LineChart };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZDNMaW5lQ2hhcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2QzTGluZUNoYXJ0L2QzTGluZUNoYXJ0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzVFLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBRy9FLElBQUE7SUFpQkksdUJBQ1ksVUFBc0IsRUFDOUIsV0FBeUIsRUFDekIsV0FBeUIsRUFDakIsYUFBNEIsRUFDcEMsYUFBbUMsRUFDbkMsRUFBVSxFQUNWLFNBQWtCLEVBQ2xCLE9BQWdCLEVBQ2hCLFdBQW9CO1FBUlosZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQUd0QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQU9wQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksdUJBQXVCLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNySixJQUFJLENBQUMsMEJBQTBCLEdBQUcsSUFBSSw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNqSjtJQXpCRCxzQkFBSSxtREFBd0I7YUFBNUI7WUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLHdCQUF3QixDQUFDO1NBQ25FOzs7T0FBQTtJQUVELHNCQUFJLGdEQUFxQjthQUF6QjtZQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMscUJBQXFCLENBQUM7U0FDaEU7OztPQUFBO0lBRUQsc0JBQUksMkNBQWdCO2FBQXBCO1lBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxnQkFBZ0IsQ0FBQztTQUMzRDs7O09BQUE7SUFpQkQsOEJBQU0sR0FBTjtRQUNJLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUM1QztJQUVELCtCQUFPLEdBQVA7UUFDSSxJQUFJLENBQUMsMEJBQTBCLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDN0M7SUFFRCx1Q0FBZSxHQUFmLFVBQWdCLFNBQXNCO1FBQ2xDLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDOUQ7d0JBcERMO0lBcURDLENBQUE7QUEzQ0QseUJBMkNDIn0=","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { BdPositionStrategy, BdTemplateSharedClasses, BdTemplateStyles } from '@delen/bd-chart-core';\nimport { bdLineChartDefaultValues } from '../lineChartDefaultValues';\nvar BdDraggerPositionStrategy = /** @class */ (function (_super) {\n    __extends(BdDraggerPositionStrategy, _super);\n    function BdDraggerPositionStrategy() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BdDraggerPositionStrategy.prototype.calculatePosition = function (templateWrapper, positioningData) {\n        var bdTemplateStyle = new BdTemplateStyles();\n        /* Add the classes that need to be set default */\n        bdTemplateStyle.classes += BdTemplateSharedClasses.calloutDraggerClass + \" \" + BdTemplateSharedClasses.calloutClass;\n        /* should the tip of the callout be on the right or the left? */\n        if (positioningData.position.x > positioningData.boundingRect.width * 0.5) {\n            bdTemplateStyle.classes += \" \" + BdTemplateSharedClasses.calloutTopRightClass;\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowTopRightClass + \" \";\n        }\n        else {\n            bdTemplateStyle.classes += \" \" + BdTemplateSharedClasses.calloutTopLeftClass;\n            bdTemplateStyle.arrowClasses += BdTemplateSharedClasses.arrowTopLeftClass + \" \";\n        }\n        /* set the x position\n                top distance is based upon the size of the callout */\n        bdTemplateStyle.templateStyle = {\n            left: positioningData.position.x + \"px\",\n            top: -templateWrapper.getBoundingClientRect().height + bdLineChartDefaultValues.margins.draggerSelectionMargins.top + 'px'\n        };\n        return bdTemplateStyle;\n    };\n    return BdDraggerPositionStrategy;\n}(BdPositionStrategy));\nexport { BdDraggerPositionStrategy };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZ2dlclBvc2l0aW9uU3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2QzTGluZUNoYXJ0L2hlbHBlcnMvZHJhZ2dlclBvc2l0aW9uU3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSx1QkFBdUIsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXJHLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBR3JFLElBQUE7SUFBK0MsNkNBQWtCOzs7O0lBRTdELHFEQUFpQixHQUFqQixVQUFrQixlQUF3QixFQUFFLGVBQXlDO1FBQ2pGLElBQUksZUFBZSxHQUFxQixJQUFJLGdCQUFnQixFQUFFLENBQUM7O1FBRy9ELGVBQWUsQ0FBQyxPQUFPLElBQU8sdUJBQXVCLENBQUMsbUJBQW1CLFNBQUksdUJBQXVCLENBQUMsWUFBYyxDQUFDOztRQUdwSCxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxlQUFlLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3hFLGVBQWUsQ0FBQyxPQUFPLElBQUksTUFBSSx1QkFBdUIsQ0FBQyxvQkFBc0IsQ0FBQztZQUM5RSxlQUFlLENBQUMsWUFBWSxJQUFPLHVCQUF1QixDQUFDLGtCQUFrQixNQUFHLENBQUM7U0FDcEY7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLGVBQWUsQ0FBQyxPQUFPLElBQUksTUFBSSx1QkFBdUIsQ0FBQyxtQkFBcUIsQ0FBQztZQUM3RSxlQUFlLENBQUMsWUFBWSxJQUFPLHVCQUF1QixDQUFDLGlCQUFpQixNQUFHLENBQUM7U0FDbkY7OztRQUlELGVBQWUsQ0FBQyxhQUFhLEdBQUc7WUFDNUIsSUFBSSxFQUFLLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFJO1lBQ3ZDLEdBQUcsRUFBRyxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLE1BQU0sR0FBRyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsR0FBRyxHQUFHLElBQUk7U0FDOUgsQ0FBQztRQUVGLE1BQU0sQ0FBQyxlQUFlLENBQUM7S0FDMUI7b0NBOUJMO0VBSytDLGtCQUFrQixFQTBCaEUsQ0FBQTtBQTFCRCxxQ0EwQkMifQ==","import { Component, ElementRef, EventEmitter, Input, Output, ViewChild, NgZone } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\nimport { BdChartTemplateComponent } from '@delen/bd-chart-core';\nimport { BdEventService, BdDeviceService } from '@delen/bd-utilities';\nimport { BdBulletPositionStrategy } from './d3LineChart/helpers/bulletPositionStrategy';\nimport { BdChartSelectionType } from './d3LineChart/helpers/chartSelectionType';\nimport { BdD3LineChart } from './d3LineChart/d3LineChart';\nimport { BdDraggerPositionStrategy } from './d3LineChart/helpers/draggerPositionStrategy';\nimport 'rxjs/add/operator/takeUntil';\nimport 'rxjs/add/operator/debounceTime';\nvar BdLineChartComponent = /** @class */ (function () {\n    function BdLineChartComponent(ngZone, bdEventService, bdDeviceService) {\n        this.ngZone = ngZone;\n        this.bdEventService = bdEventService;\n        this.bdDeviceService = bdDeviceService;\n        this.needsRerender = false;\n        this.renderComplete$ = new Subject();\n        this.chartDestroyed$ = new Subject();\n        this.componentDestroyed$ = new Subject();\n        this.selectedDataPointPropertyName = 'selectedDataPoint';\n        // event so we can react when the selected point is changed\n        this.selectedDataPointChange = new EventEmitter();\n        // the current selection type\n        // the method for selecting points: None, Dragger, Bullet\n        this.selectionType = BdChartSelectionType.None;\n        this.onRenderFinished = new EventEmitter();\n        // generate a random id for the chart\n        this.id = Math.floor(Math.random() * 1000000000).toString();\n    }\n    BdLineChartComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        var timeToDebounce = this.bdDeviceService.isIOS() ? 500 : 0;\n        this.bdEventService\n            .onWindowResizeOutsideZone\n            .debounceTime(timeToDebounce)\n            .takeUntil(this.componentDestroyed$)\n            .subscribe(function () {\n            if (_this.d3LineChart) {\n                if (_this.rendering) {\n                    _this.needsRerender = true;\n                }\n                else {\n                    _this.rerender(false);\n                }\n            }\n        });\n    };\n    BdLineChartComponent.prototype.ngOnChanges = function (changes) {\n        // dont rerender when rendering is not finished\n        switch (this.selectionType) {\n            case BdChartSelectionType.Bullet:\n                this.positionStrategy = new BdBulletPositionStrategy();\n                break;\n            case BdChartSelectionType.Dragger:\n                this.positionStrategy = new BdDraggerPositionStrategy();\n                break;\n            default:\n                this.positionStrategy = null;\n        }\n        if (!this.rendering) {\n            if (this.d3LineChart) {\n                if (this.onlySelectedDataPointChanged(changes)) {\n                    // the chart already exists and only the selected point has changed so we select it in the chart\n                    this.d3LineChart.selectDataPoint(changes[this.selectedDataPointPropertyName].currentValue);\n                }\n                else {\n                    // we need to rerender the chart because date, axis config or height has changed\n                    this.rerender(true);\n                }\n            }\n            else {\n                // first time rendering the chart\n                this.renderChart(true);\n            }\n        }\n    };\n    BdLineChartComponent.prototype.ngOnDestroy = function () {\n        this.componentDestroyed$.next(true);\n        this.componentDestroyed$.complete();\n        this.renderComplete$.next(true);\n        this.renderComplete$.complete();\n        this.chartDestroyed$.next(true);\n        this.chartDestroyed$.complete();\n    };\n    // when selection type is bullet the callout can be hidden by clicking it\n    // when selection type is bullet the callout can be hidden by clicking it\n    BdLineChartComponent.prototype.toggleBulletHide = \n    // when selection type is bullet the callout can be hidden by clicking it\n    function () {\n        if (this.selectionType === BdChartSelectionType.Bullet) {\n            // get the hidden property from chart\n            this.bdChartTemplate.hidden = !this.bdChartTemplate.hidden;\n        }\n    };\n    // method to determine if we need to rerender or select a point\n    // method to determine if we need to rerender or select a point\n    BdLineChartComponent.prototype.onlySelectedDataPointChanged = \n    // method to determine if we need to rerender or select a point\n    function (changes) {\n        var count = 0;\n        var nameFound = false;\n        for (var propName in changes) {\n            count++;\n            nameFound = propName === this.selectedDataPointPropertyName;\n        }\n        return nameFound && count === 1;\n    };\n    BdLineChartComponent.prototype.renderChart = function (animate) {\n        var _this = this;\n        if (this.data && this.data.length > 0 && this.xAxisConfig && this.yAxisConfig) {\n            this.rendering = true;\n            // make a new D3Line chart\n            this.d3LineChart = new BdD3LineChart(this.chart.nativeElement, this.xAxisConfig, this.yAxisConfig, this.data, this.selectionType, this.id, this.container, animate, this.height);\n            // subscribe to do some actions when rendering is finished\n            this.d3LineChart.onRenderFinished.takeUntil(this.renderComplete$).subscribe(function () { return _this.afterRender(); });\n            // render the chart\n            this.d3LineChart.render();\n        }\n    };\n    BdLineChartComponent.prototype.afterRender = function () {\n        var _this = this;\n        this.renderComplete$.next(true);\n        if (this.selectionType !== BdChartSelectionType.None) {\n            // selections can be made on the chart, subscribe to get the data point, screen coordinates\n            this.d3LineChart.lineChartTemplateSubject.takeUntil(this.chartDestroyed$).subscribe(function (positioningData) {\n                // the events for the chart run outside the zone, we only need to run these changes inside the zone to update the template position\n                // the events for the chart run outside the zone, we only need to run these changes inside the zone to update the template position\n                _this.ngZone.run(function () {\n                    // bind the point and its screen coordinates to the template\n                    // bind the point and its screen coordinates to the template\n                    _this.selectedDataPoint = positioningData.dataPoint;\n                    _this.positioningData = positioningData;\n                    // emit to the outside world that we selected a new point\n                    // emit to the outside world that we selected a new point\n                    _this.selectedDataPointChange.emit(_this.selectedDataPoint);\n                });\n            });\n            // after rendering the chart we can select the datapoint\n            if (this.selectedDataPoint) {\n                this.d3LineChart.selectDataPoint(this.selectedDataPoint);\n            }\n        }\n        if (!this.needsRerender) {\n            this.rendering = false;\n            // emit an event to the outside word to notify we have finished rendering\n            // after this event we can render again\n            this.onRenderFinished.emit();\n        }\n        else {\n            this.needsRerender = false;\n            this.rerender(false);\n        }\n    };\n    BdLineChartComponent.prototype.rerender = function (animate) {\n        this.renderComplete$.next(true);\n        this.chartDestroyed$.next(true);\n        this.positioningData = null;\n        this.d3LineChart.destroy();\n        this.rendering = true;\n        this.renderChart(animate);\n    };\n    BdLineChartComponent.decorators = [\n        { type: Component, args: [{\n                    selector: 'bd-line-chart2',\n                    template: \"<div class=\\\"ng2-c-chart\\\">    <bd-chart-template2        [positionStrategy]=\\\"positionStrategy\\\"        [positioningData]=\\\"positioningData\\\"        (click)=\\\"toggleBulletHide()\\\">        <ng-content></ng-content>    </bd-chart-template2>    <svg #chart class=\\\"ng2-c-chart__svg\\\"></svg></div>\"\n                },] },\n    ];\n    /** @nocollapse */\n    BdLineChartComponent.ctorParameters = function () { return [\n        { type: NgZone, },\n        { type: BdEventService, },\n        { type: BdDeviceService, },\n    ]; };\n    BdLineChartComponent.propDecorators = {\n        \"chart\": [{ type: ViewChild, args: ['chart',] },],\n        \"bdChartTemplate\": [{ type: ViewChild, args: [BdChartTemplateComponent,] },],\n        \"height\": [{ type: Input },],\n        \"data\": [{ type: Input },],\n        \"xAxisConfig\": [{ type: Input },],\n        \"yAxisConfig\": [{ type: Input },],\n        \"selectedDataPointChange\": [{ type: Output },],\n        \"selectedDataPoint\": [{ type: Input },],\n        \"container\": [{ type: Input },],\n        \"selectionType\": [{ type: Input },],\n        \"onRenderFinished\": [{ type: Output },],\n    };\n    return BdLineChartComponent;\n}());\nexport { BdLineChartComponent };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZS1jaGFydC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2xpbmUtY2hhcnQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQWEsTUFBTSxFQUFpQixTQUFTLEVBQUUsTUFBTSxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUNuSixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXZDLE9BQU8sRUFBeUMsd0JBQXdCLEVBQW1DLE1BQU0sc0JBQXNCLENBQUM7QUFDeEksT0FBTyxFQUFFLGNBQWMsRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUN4RixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNoRixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDMUQsT0FBTyxFQUFFLHlCQUF5QixFQUFDLE1BQU0sK0NBQStDLENBQUM7QUFHekYsT0FBTyw2QkFBNkIsQ0FBQztBQUNyQyxPQUFPLGdDQUFnQyxDQUFDOztJQTRDcEMsOEJBQ1ksTUFBYyxFQUNkLGNBQThCLEVBQzlCLGVBQWdDO1FBRmhDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsb0JBQWUsR0FBZixlQUFlLENBQWlCOzZCQXZDWCxLQUFLOytCQUNNLElBQUksT0FBTyxFQUFXOytCQUN0QixJQUFJLE9BQU8sRUFBVzttQ0FDbEIsSUFBSSxPQUFPLEVBQVc7NkNBQ2IsbUJBQW1COzt1Q0FnQk4sSUFBSSxZQUFZLEVBQXNCOzs7NkJBTzdELG9CQUFvQixDQUFDLElBQUk7Z0NBT3ZCLElBQUksWUFBWSxFQUFR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","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { BdChartCoreModule } from '@delen/bd-chart-core';\nimport { BdLineChartComponent } from './line-chart.component';\nvar components = [BdLineChartComponent];\nvar BdLineChartModule = /** @class */ (function () {\n    function BdLineChartModule() {\n    }\n    BdLineChartModule.decorators = [\n        { type: NgModule, args: [{\n                    imports: [CommonModule, BdChartCoreModule],\n                    declarations: components.slice(),\n                    exports: components\n                },] },\n    ];\n    /** @nocollapse */\n    BdLineChartModule.ctorParameters = function () { return []; };\n    return BdLineChartModule;\n}());\nexport { BdLineChartModule };\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluZS1jaGFydC5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2xpbmUtY2hhcnQubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXpDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXpELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRTlELElBQU0sVUFBVSxHQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQzs7Ozs7Z0JBRWhELFFBQVEsU0FBQztvQkFDTixPQUFPLEVBQUUsQ0FBQyxZQUFZLEVBQUUsaUJBQWlCLENBQUM7b0JBQzFDLFlBQVksRUFBTSxVQUFVLFFBQUM7b0JBQzdCLE9BQU8sRUFBRSxVQUFVO2lCQUN0Qjs7Ozs0QkFiRDs7U0FjYSxpQkFBaUIifQ==","/**\n * Generated bundle index. Do not edit.\n */\nexport * from './line-chart';\nexport { BdLineChartComponent as ɵa } from './line-chart.component';\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmNJbmxpbmVkL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUlBLGNBQWMsY0FBYyxDQUFDO0FBRTdCLE9BQU8sRUFBQyxvQkFBb0IsSUFBSSxFQUFFLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQyJ9"],"names":["this","__extends","Subject","min","d3Min","max","d3Max"],"mappings":"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"}